<autobuild>
  <configuration>
    <environment name="ACE_ROOT"        value="/tao_builds/taoadmin/doc_installed/share/ace"/>
    <environment name="CIAO_ROOT"       value="not_using_ciao"/>
    <environment name="DDS_ROOT"        value="not_using_dds"/>
    <environment name="LD_LIBRARY_PATH" value="/usr/sfw/lib:/usr/local/lib:/tao_builds/taoadmin/doc_installed/lib:/tao_builds/taoadmin/doc_installed/shared/ace/lib:"/>
    <environment name="MPC_ROOT"        value="/home/taoadmin/MPC"/>
    <environment name="PATH"            value="/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/ccs/bin:/tao_builds/taoadmin/doc_installed/shared/ace/bin:"/>
    <environment name="TAO_ROOT"        value="/tao_builds/taoadmin/doc_installed/share/tao"/>
    <variable    name="build_name"      value="gcc_d1o0i0b32_inst"/>
    <variable    name="creator"         value="harrisb@ociweb.com"/>
    <variable    name="log_file"        value="gcc_d1o0i0b32_inst.log"/>
    <variable    name="log_root"        value="/www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst"/>
    <variable    name="project_root"    value="/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst"/>
    <variable    name="root"            value="/tao_builds/taoadmin/doc"/>
  </configuration>

  <!-- Build preparation -->
  <command name="process_listener"   options="localhost:32001"/>
  <command name="status"             options="on"/>
  <command name="log"                options="on"/>
  <command name="clone_build_tree"/>
  <command name="shell"              options="cd build/gcc_d1o0i0b32_inst ; rm -rf ACE/ace ACE/ACEXML ACE/apps ACE/bin/{depgen,mwc,mpc}.pl ACE/contrib/minizip ACE/debian ACE/include ACE/Kokyu ACE/protocols/ace TAO/{utils,TAO_IDL,tao} CIAO DAnCE ACE/ACE.mwc TAO/*.mwc"/>
  <command name="shell"              options="cd build/gcc_d1o0i0b32_inst ; ls -ld TAO/orbsvcs/* | perl -ne'print if s/^d.*?(\S+)$/$1/' | egrep -vi 'tests|examples' | xargs -t rm -rf"/>
  <command name="file_manipulation"  options="type=create file=build/gcc_d1o0i0b32_inst/setenv.sh output='ACE_ROOT=\x22/tao_builds/taoadmin/doc_installed/share/ace\x22; export ACE_ROOT\nLD_LIBRARY_PATH=\x22/usr/sfw/lib:/usr/local/lib:/tao_builds/taoadmin/doc_installed/lib:/tao_builds/taoadmin/doc_installed/shared/ace/lib:\x22; export LD_LIBRARY_PATH\nMPC_ROOT=\x22/home/taoadmin/MPC\x22; export MPC_ROOT\nPATH=\x22/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/ccs/bin:/tao_builds/taoadmin/doc_installed/shared/ace/bin:\x22; export PATH\nTAO_ROOT=\x22/tao_builds/taoadmin/doc_installed/share/tao\x22; export TAO_ROOT\n'"/>
  <command name="print_os_version"/>
  <command name="print_env_vars"/>
  <command name="print_ace_config"/>
  <command name="print_make_version"/>
  <command name="check_compiler"     options="gcc"/>

  <!-- Conditionally clean binaries -->
  <command name="make" options="-s -k find=*akefile dir=ACE/tests conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/protocols conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/protocols/tests conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/examples conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/performance-tests conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/tests conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/examples conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/performance-tests conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/tests conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/examples conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/performance-tests conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/DevGuideExamples conditional=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/DevGuideExamples conditional_rm=/tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/.clean_binaries clean_binaries"/>

  <!-- Finish build preparation -->
  <command name="generate_workspace" options="-type gnuace -recurse"/>

  <!-- Build dependencies -->
  <command name="make" options="-s -k find=*akefile dir=ACE/tests depend"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/protocols depend"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/protocols/tests depend"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/examples depend"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/performance-tests depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/tests depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/examples depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/performance-tests depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/tests depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/examples depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/performance-tests depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/DevGuideExamples depend"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/DevGuideExamples depend"/>

  <!-- Build targets -->
  <command name="make" options="-s -k find=*akefile dir=ACE/tests"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/protocols"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/protocols/tests"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/examples"/>
  <command name="make" options="-s -k find=*akefile dir=ACE/performance-tests"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/tests"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/examples"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/performance-tests"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/tests"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/examples"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/performance-tests"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/DevGuideExamples"/>
  <command name="make" options="-s -k find=*akefile dir=TAO/orbsvcs/DevGuideExamples"/>

  <!-- Post build -->
<!--  <command name="auto_run_tests"  options="-a -t -o -l TAO/DevGuideExamples/devguide_examples.lst -Config FIXED_BUGS_ONLY -Config Linux"/>  -->
  <command name="anonymous_shell" options="cd /tao_builds/taoadmin/; tar --mode=ug+w -cjf /www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst/for_upload/doc_reliability_enh.tar.bz2 doc_installed"/>
  <command name="anonymous_shell" options="diff /tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/ChangeLog /www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst/for_upload/ACE_ChangeLog_Uploaded > /www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst/for_upload/ACE_ChangeLog.diff"/>
  <command name="anonymous_shell" options="cp /tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/ACE/ChangeLog /www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst/for_upload/ACE_ChangeLog"/>
  <command name="anonymous_shell" options="diff /tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/TAO/ChangeLog /www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst/for_upload/TAO_ChangeLog_Uploaded > /www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst/for_upload/TAO_ChangeLog.diff"/>
  <command name="anonymous_shell" options="cp /tao_builds/taoadmin/doc/build/gcc_d1o0i0b32_inst/TAO/ChangeLog /www-docs/autobuild_logs/doc_trunk_mealworm_linux_gcc_d1o0i0b32_inst/for_upload/TAO_ChangeLog"/>
  <command name="anonymous_shell" options="rm -rf /tao_builds/taoadmin/doc/build/TAO_ACE"/>
  <command name="log"             options="off"/>
  <command name="process_logs"    options="copy"/>
  <command name="status"          options="off"/>
</autobuild>
