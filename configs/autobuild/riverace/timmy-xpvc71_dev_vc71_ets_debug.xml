<!-- $Id$ -->
<!-- This build is for the LabVIEW RT/ETS target. There's a separate build -->
<!-- for the host part ACE, gperf, TAO_IDL needed to build IDLs for this. -->
<!-- Those results are in c:\ace\ACE_wrappers. -->

<autobuild>
    <configuration>
        <environment name="ACE_TEST_VERBOSE" value="1" />   
        <environment name="ACE_ROOT"     value="C:\\ace\\target_ets\\ACE_wrappers" />
        <environment name="TAO_ROOT"     value="C:\\ace\\target_ets\\ACE_wrappers\\TAO" />
        <environment name="HOST_ROOT"    value="C:\\ace\\ACE_wrappers" />
        <environment name="HOST_TAO_IDL"      value="C:\\ace\\ACE_wrappers\\bin\\tao_idl.exe" />
        <environment name="PATH"         value="C:\\ace\\ACE_wrappers\\lib" type="prefix" />
        <environment name="INCLUDE"      value="C:\\pharemb\\include" type="suffix" />
        <environment name="LIB"          value="C:\\pharemb\\lib" type="suffix" />
        <environment name="MPC_ROOT"     value="C:\\ace\\MPC" />
        <environment name="PHARDIR"      value="C:\\pharemb" />
        <!-- Target setups -->
        <environment name="DOC_TEST_ACE" value="NIPXI" />
        <environment name="DOC_TEST_CLIENT" value="HOST" />
        <environment name="HOST_OS"      value="local" />
        <environment name="HOST_ACE_ROOT"    value="C:\\ace\\ACE_wrappers" />
        <environment name="DOC_TEST_SERVER" value="NIPXI" />
        <environment name="NIPXI_IPNAME" value="192.168.10.50" />
        <environment name="NIPXI_CTLPORT" value="8888" />
        <environment name="NIPXI_OS"        value="LabVIEW_RT" />
        <environment name="NIPXI_EXE_SUBDIR" value="ETS_Debug" />
        <environment name="NIPXI_FSROOT" value="\\ni-rt\\system" />
        <environment name="ACE_REBOOT_LVRT_CMD" value="C:\\ace\\ACE_wrappers\\bin\\LabVIEW_RT\\PXI_Reset.exe" />
        <environment name="ACE_LVRT_REBOOT_TIME" value="120" />

        <variable name="root"            value="C:\\ace\\target_ets" />
        <variable name="project_root"    value="C:\\ace\\target_ets\\ACE_wrappers" />
	<variable name="log_file"        value="vc71_ets_debug.log" />
        <variable name="log_root"        value="g:\\build_logs\\dev\\vc71_ets_debug" />
        <variable name="name"            value="Win32 ETS Debug" />
        <variable name="local_features"  value="c:\\ace\\target_ets\\ACE_wrappers\\local.features" />
        <variable name="configs"         value="Win32 Exceptions PHARLAP LabVIEW_RT" />
    </configuration>

    <command name="status"            options="on" />
    <command name="file_manipulation" options="type=mustnotexist file=ACE_wrappers/.disable" />
    <command name="file_manipulation" options="type=create file=ACE_wrappers/.disable output='RUNNING'" />

    <command name="vc7make"           options="/clean \x22ETS Debug\x22 ACE_ETS.sln" />
    <command name="vc7make"           options="/clean \x22ETS Debug\x22 TAO/TAO_ETS.sln" />

    <command name="log"               options="ON" />

    <command name="svn"               options="dir=/ace/target_ets/ACE_wrappers update --non-interactive" />
    <command name="svn"               options="dir=/ace/target_ets/ACE_wrappers/TAO update --non-interactive" />

    <command name="file_manipulation" options="type=create file=ACE_wrappers/ace/config.h output='#define ACE_DISABLE_WIN32_ERROR_WINDOWS\n#define ACE_HAS_STANDARD_CPP_LIBRARY 1\n#define ACE_HAS_TOKENS_LIBRARY\n#define ACE_PHARLAP_LABVIEW_RT\n#define ACE_PHARLAP_TESTLOG_TO_FILE\n#include \x22ace/config-pharlap.h\x22\n'" />

    <command name="file_manipulation" options="type=create file=ACE_wrappers/local.features output='rwho = 0\nwinregistry = 0\n'" />

    <command name="print_os_version" />
    <command name="print_env_vars" />
    <command name="check_compiler" options="msvc" />
    <command name="print_ace_config" />

    <command name="generate_workspace" options="-type vc71 -recurse -relative ACE_ROOT=C:/ace/target_ets/ACE_wrappers -relative TAO_ROOT=C:/ace/target_ets/ACE_wrappers/TAO -exclude ASNMP,apps/gperf,TAO/TAO_IDL,TAO/orbsvcs/IFR_Service -feature_file c:\\ace\\target_ets\\ACE_wrappers\\local.features -value_template tao_idl=$(HOST_TAO_IDL) -value_template configurations='\x22ETS Debug\x22' -value_template configurations+='\x22ETS Release\x22' -name_modifier *_ETS -base labviewrt_dll" />
    <command name="vc7make"           options="/build \x22ETS Debug\x22 ACE_ETS.sln" />
    <!-- Need /useenv to make it pick up PATH from environment, else it  -->
    <!-- will pick up the ACEd.dll built for ETS while invoking TAO_IDL. -->
    <command name="vc7make"           options="/useenv /build \x22ETS Debug\x22 TAO/TAO_ETS.sln" />

    <command name="setup_lvrt" />
    <command name="auto_run_tests"    options="-ExeSubDir ETS_Debug -a -o" />

    <command name="log"               options="OFF" />
    <command name="process_logs"      options="move prettify clean=5 index" />
    <command name="file_manipulation" options="type=delete file=ACE_wrappers/.disable" />
    <command name="status"            options="off" />
</autobuild>
