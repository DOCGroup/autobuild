<!-- $Id$ -->
<autobuild>
    <configuration>
        <environment name="ACE_ROOT"     value="C:\ace\ACE_wrappers" />
        <environment name="PATH"         value="C:\ace\ACE_wrappers\lib" type="prefix" />
        <environment name="MPC_ROOT" value="C:\ace\MPC" />

        <variable name="root"            value="C:\ace" />
        <variable name="project_root"    value="C:\ace\ACE_wrappers" />
	<variable name="log_file"        value="vc8_winmobile5_debug.log" />
        <variable name="log_root"        value="m:\dev\vc8_winmobile5_debug" />
        <variable name="name"            value="WinMobile5 VC.NET 2005 Debug" />
        <variable name="local_features"  value="c:\ace\ACE_wrappers\local.features" />
        <variable name="configs"         value="Win32 WinCE Exceptions" />
    </configuration>

    <command name="status"            options="on" />
    <command name="file_manipulation" options="type=mustnotexist file=ACE_wrappers/.disable" />
    <command name="file_manipulation" options="type=create file=ACE_wrappers/.disable output='RUNNING'" />

    <command name="vc7make"           options="/clean \x22Debug|Windows Mobile 5.0 Pocket PC SDK (ARMV4I)\x22 ACE_WinCE.sln" />

    <command name="log"               options="ON" />

    <command name="svn"               options="dir=/ace/MPC update --non-interactive" />
    <command name="svn"               options="dir=/ace/ACE_wrappers update --non-interactive" />

    <command name="file_manipulation" options="type=create file=ACE_wrappers/ace/config.h output='#define ACE_DISABLE_WIN32_ERROR_WINDOWS\n#define ACE_HAS_STANDARD_CPP_LIBRARY 1\n#define ACE_HAS_TOKENS_LIBRARY\n#include \x22ace/config-win32.h\x22\n'" />

    <!-- Turning on uses_wchar will prevent generation of projects that
         CE can't do since it always uses wchar. -->
    <command name="file_manipulation" options="type=create file=ACE_wrappers/local.features output='rwho = 0\nmfc = 1\nuses_wchar = 1\nwince=1\n'" />

    <command name="print_os_version" />
    <command name="check_compiler" options="msvc" />
    <command name="print_ace_config" />

    <command name="generate_workspace" options="-type vc8 -recurse -exclude Kokyu -relative ACE_ROOT=C:\ace\ACE_wrappers -feature_file c:\ace\ACE_wrappers\local.features -value_template platforms='\x22Pocket PC 2003 (ARMV4)\x22' -value_template platforms+='\x22Smartphone 2003 (ARMV4)\x22' -value_template platforms+='\x22Windows Mobile 5.0 Pocket PC SDK (ARMV4I)\x22' -value_template platforms+='\x22Windows Mobile 5.0 Smartphone SDK (ARMV4I)\x22' -name_modifier *_WinCE -value_template BufferSecurityCheck=\x22false\x22" />
    <command name="vc7make"           options="ACE_WinCE.sln /build \x22Debug|Windows Mobile 5.0 Pocket PC SDK (ARMV4I)\x22" />

    <!-- command name="auto_run_tests"    options="-a" / -->

    <command name="log"               options="OFF" />
    <command name="process_logs"      options="move prettify clean=5 index" />
    <command name="file_manipulation" options="type=delete file=ACE_wrappers/.disable" />
    <command name="status"            options="off" />
</autobuild>
